<div id = "newSurvey">
	<form name = "surveyForm" ng-submit = "surveyForm.$valid && addSurvey(surveys)" novalidate>
		<div class="row">
			<div class="col-md-12" ng-class="{ 'has-error': surveyForm.title.$touched && surveyForm.title.$invalid }">
				<input name = "title" ng-model = "survey.title" type = "text" placeholder = "Formulari sense títol" class = "title" required ng-minlength="9"/>		
			</div>
		</div>
		<div class="row">
			<div ng-repeat="question in survey.questions" class="col-md-12" ng-init = "number = $index+1">
				<div class = "form-group" ng-class="{ 'has-error': surveyForm['question'+number].$touched && surveyForm['question'+number].$invalid }">
					<input type="text" name = "question{{number}}" ng-model="question.text" placeholder="Pregunta sense titol" 
					required
					question-validity = "question">	
					<br>
					<div class="row">
						<div class="col-md-12">
							<div ng-repeat = "answer in question.choices track by $index" >
						    		<input type="radio" value = "{{answer.text}}"> 
						    		<input type="text" ng-model="answer.text" name="answer{{number}}" placeholder="Opció {{$index+1}}" focus-me="$last">

						    		<a ng-click="removeChoice(answer,question.choices)">
		          						<span class="glyphicon glyphicon-remove" style="color:#D3D3D3"></span></a></br>
					  		</div>
						  		<input type="radio"> <a ng-click="addChoice(question.choices)" role="button" style="color:#A9A9A9"><span></span>Afegiu opció</a>
						</div>
				  	</div>	
			  	<button type="button" class="btn btn-default" ng-click = "removeQuestion(question)">
					<span class ="glyphicon glyphicon-trash"></span>
				</button>	
				<div class="help-block" ng-messages="surveyForm['question'+number].$error" ng-if="surveyForm['question'+number].$touched">
	                <p ng-message="required">Es requereix text de la pregunta</p>
	                <p ng-message="questionValidator">La pregunta té menys de dues opcions de resposta..</p>
	                <p ng-message="duplicateValidator">Opcions de resposta tenen duplicats</p>
	                
        		</div>
             	<pre>surveyForm.question{{number}}.$error = {{surveyForm['question'+number].$error | json}}</pre>					
		  	</div>			  	
         </div>
	    </div>
	    
	
		<div class="row">
			<div class="col-md-3">
				<button type="button" class="btn btn-info" ng-click="addQuestion()">
					<span class="glyphicon glyphicon-plus"></span>
				</button>
			</div>
		</div>
		<div class="row">
			<div class="col-md-2 col-md-offset-10">
				<input type = "submit" class="btn btn-info" value = "Enviar"/>
			</div>
		</div>
		
		<!--<div>surveyForm is {{surveyForm.$valid}}</div>-->
			
	</form>
</div>